package org.ultimatehg;

import java.util.ArrayList;
import java.util.Random;
import java.util.UUID;

import org.bukkit.Bukkit;
import org.bukkit.ChatColor;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.World;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.PlayerInventory;
import org.bukkit.potion.PotionEffect;
import org.bukkit.potion.PotionEffectType;

public class DITimer implements Runnable {

	private int seconds, secondsLeft;
	private ArrayList<UUID> players = new ArrayList<UUID>();
	
	private String[] itemList = {"ACACIA_BOAT", "ACACIA_BUTTON", "ACACIA_DOOR", "ACACIA_FENCE", "ACACIA_FENCE_GATE", "ACACIA_LEAVES", "ACACIA_LOG", "ACACIA_PLANKS", "ACACIA_PRESSURE_PLATE", "ACACIA_SAPLING", "ACACIA_SIGN", "ACACIA_SLAB", "ACACIA_STAIRS", "ACACIA_TRAPDOOR", "ACACIA_WOOD", "ACTIVATOR_RAIL", "AIR", "ALLIUM", "ANDESITE", "ANDESITE_SLAB", "ANDESITE_STAIRS", "ANDESITE_WALL", "ANVIL", "APPLE", "ARMOR_STAND", "ARROW", "AZURE_BLUET", "BAKED_POTATO", "BAMBOO", "BAMBOO_SAPLING", "BARREL", "BARRIER", "BAT_SPAWN_EGG", "BEACON", "BEDROCK", "BEEF", "BEETROOT", "BEETROOTS", "BEETROOT_SEEDS", "BEETROOT_SOUP", "BELL", "BIRCH_BOAT", "BIRCH_BUTTON", "BIRCH_DOOR", "BIRCH_FENCE", "BIRCH_FENCE_GATE", "BIRCH_LEAVES", "BIRCH_LOG", "BIRCH_PLANKS", "BIRCH_PRESSURE_PLATE", "BIRCH_SAPLING", "BIRCH_SIGN", "BIRCH_SLAB", "BIRCH_STAIRS", "BIRCH_TRAPDOOR", "BIRCH_WOOD", "BLACK_BANNER", "BLACK_BED", "BLACK_CARPET", "BLACK_CONCRETE", "BLACK_CONCRETE_POWDER", "BLACK_DYE", "BLACK_GLAZED_TERRACOTTA", "BLACK_SHULKER_BOX", "BLACK_STAINED_GLASS", "BLACK_STAINED_GLASS_PANE", "BLACK_TERRACOTTA", "BLACK_WOOL", "BLAST_FURNACE", "BLAZE_POWDER", "BLAZE_ROD", "BLAZE_SPAWN_EGG", "BLUE_BANNER", "BLUE_BED", "BLUE_CARPET", "BLUE_CONCRETE", "BLUE_CONCRETE_POWDER", "BLUE_DYE", "BLUE_GLAZED_TERRACOTTA", "BLUE_ICE", "BLUE_ORCHID", "BLUE_SHULKER_BOX", "BLUE_STAINED_GLASS", "BLUE_STAINED_GLASS_PANE", "BLUE_TERRACOTTA", "BLUE_WOOL", "BONE", "BONE_BLOCK", "BONE_MEAL", "BOOK", "BOOKSHELF", "BOW", "BOWL", "BRAIN_CORAL", "BRAIN_CORAL_BLOCK", "BRAIN_CORAL_FAN", "BREAD", "BREWING_STAND", "BRICK", "BRICKS", "BRICK_SLAB", "BRICK_STAIRS", "BRICK_WALL", "BROWN_BANNER", "BROWN_BED", "BROWN_CARPET", "BROWN_CONCRETE", "BROWN_CONCRETE_POWDER", "BROWN_DYE", "BROWN_GLAZED_TERRACOTTA", "BROWN_MUSHROOM", "BROWN_MUSHROOM_BLOCK", "BROWN_SHULKER_BOX", "BROWN_STAINED_GLASS", "BROWN_STAINED_GLASS_PANE", "BROWN_TERRACOTTA", "BROWN_WOOL", "BUBBLE_COLUMN", "BUBBLE_CORAL", "BUBBLE_CORAL_BLOCK", "BUBBLE_CORAL_FAN", "BUCKET", "CACTUS", "CAKE", "CAMPFIRE", "CARROT", "CARROTS", "CARROT_ON_A_STICK", "CARTOGRAPHY_TABLE", "CARVED_PUMPKIN", "CAT_SPAWN_EGG", "CAULDRON", "CAVE_SPIDER_SPAWN_EGG", "CHAINMAIL_BOOTS", "CHAINMAIL_CHESTPLATE", "CHAINMAIL_HELMET", "CHAINMAIL_LEGGINGS" , "CHARCOAL", "CHEST", "CHEST_MINECART", "CHICKEN", "CHICKEN_SPAWN_EGG", "CHIPPED_ANVIL", "CHISELED_QUARTZ_BLOCK", "CHISELED_RED_SANDSTONE", "CHISELED_SANDSTONE", "CHISELED_STONE_BRICKS", "CHORUS_FLOWER", "CHORUS_FRUIT", "CHORUS_PLANT", "CLAY", "CLAY_BALL", "CLOCK", "COAL", "COAL_BLOCK", "COAL_ORE", "COARSE_DIRT", "COBBLESTONE", "COBBLESTONE_SLAB", "COBBLESTONE_STAIRS", "COBBLESTONE_WALL", "COBWEB", "COCOA", "COCOA_BEANS", "COD", "COD_BUCKET", "COD_SPAWN_EGG", "COMPARATOR", "COMPASS", "COMPOSTER", "CONDUIT", "COOKED_BEEF", "COOKED_CHICKEN", "COOKED_COD", "COOKED_MUTTON", "COOKED_PORKCHOP", "COOKED_RABBIT", "COOKED_SALMON", "COOKIE", "CORNFLOWER", "COW_SPAWN_EGG", "CRACKED_STONE_BRICKS", "CRAFTING_TABLE", "CREEPER_BANNER_PATTERN", "CREEPER_HEAD", "CREEPER_SPAWN_EGG", "CROSSBOW", "CUT_RED_SANDSTONE", "CUT_RED_SANDSTONE_SLAB", "CUT_SANDSTONE", "CUT_SANDSTONE_SLAB", "CYAN_BANNER", "CYAN_BED", "CYAN_CARPET", "CYAN_CONCRETE", "CYAN_CONCRETE_POWDER", "CYAN_DYE", "CYAN_GLAZED_TERRACOTTA", "CYAN_SHULKER_BOX", "CYAN_STAINED_GLASS", "CYAN_STAINED_GLASS_PANE", "CYAN_TERRACOTTA", "CYAN_WOOL", "DAMAGED_ANVIL", "DANDELION", "DARK_OAK_BOAT", "DARK_OAK_BUTTON", "DARK_OAK_DOOR", "DARK_OAK_FENCE", "DARK_OAK_FENCE_GATE", "DARK_OAK_LEAVES", "DARK_OAK_LOG", "DARK_OAK_PLANKS", "DARK_OAK_PRESSURE_PLATE", "DARK_OAK_SAPLING", "DARK_OAK_SIGN", "DARK_OAK_SLAB", "DARK_OAK_STAIRS", "DARK_OAK_TRAPDOOR", "DARK_OAK_WOOD", "DARK_PRISMARINE", "DARK_PRISMARINE_SLAB", "DARK_PRISMARINE_STAIRS", "DAYLIGHT_DETECTOR", "DEAD_BRAIN_CORAL", "DEAD_BRAIN_CORAL_BLOCK", "DEAD_BRAIN_CORAL_FAN", "DEAD_BUBBLE_CORAL", "DEAD_BUBBLE_CORAL_BLOCK", "DEAD_BUBBLE_CORAL_FAN", "DEAD_BUSH", "DEAD_FIRE_CORAL", "DEAD_FIRE_CORAL_BLOCK", "DEAD_FIRE_CORAL_FAN", "DEAD_HORN_CORAL", "DEAD_HORN_CORAL_BLOCK", "DEAD_HORN_CORAL_FAN", "DEAD_TUBE_CORAL", "DEAD_TUBE_CORAL_BLOCK", "DEAD_TUBE_CORAL_FAN", "DETECTOR_RAIL", "DIAMOND", "DIAMOND_AXE", "DIAMOND_BLOCK", "DIAMOND_BOOTS", "DIAMOND_CHESTPLATE", "DIAMOND_HELMET", "DIAMOND_HOE", "DIAMOND_HORSE_ARMOR", "DIAMOND_LEGGINGS", "DIAMOND_ORE", "DIAMOND_PICKAXE", "DIAMOND_SHOVEL", "DIAMOND_SWORD", "DIORITE", "DIORITE_SLAB", "DIORITE_STAIRS", "DIORITE_WALL", "DIRT", "DISPENSER", "DOLPHIN_SPAWN_EGG", "DONKEY_SPAWN_EGG", "DRAGON_BREATH", "DRAGON_EGG", "DRAGON_HEAD", "DRIED_KELP", "DRIED_KELP_BLOCK", "DROPPER", "DROWNED_SPAWN_EGG", "EGG", "ELDER_GUARDIAN_SPAWN_EGG", "ELYTRA", "EMERALD", "EMERALD_BLOCK", "EMERALD_ORE", "ENCHANTED_GOLDEN_APPLE", "ENCHANTING_TABLE", "ENDERMAN_SPAWN_EGG", "ENDERMITE_SPAWN_EGG", "ENDER_CHEST", "ENDER_EYE", "ENDER_PEARL", "END_CRYSTAL", "END_PORTAL_FRAME", "END_ROD", "END_STONE", "END_STONE_BRICKS", "END_STONE_BRICK_SLAB", "END_STONE_BRICK_STAIRS", "END_STONE_BRICK_WALL", "EVOKER_SPAWN_EGG", "EXPERIENCE_BOTTLE", "FEATHER", "FERMENTED_SPIDER_EYE", "FERN", "FILLED_MAP", "FIRE", "FIREWORK_ROCKET", "FIREWORK_STAR", "FIRE_CHARGE", "FIRE_CORAL", "FIRE_CORAL_BLOCK", "FIRE_CORAL_FAN", "FISHING_ROD", "FLETCHING_TABLE", "FLINT", "FLINT_AND_STEEL", "FLOWER_BANNER_PATTERN", "FLOWER_POT", "FOX_SPAWN_EGG", "FURNACE", "FURNACE_MINECART", "GHAST_SPAWN_EGG", "GHAST_TEAR", "GLASS", "GLASS_BOTTLE", "GLASS_PANE", "GLISTERING_MELON_SLICE", "GLOBE_BANNER_PATTERN", "GLOWSTONE", "GLOWSTONE_DUST", "GOLDEN_APPLE", "GOLDEN_AXE", "GOLDEN_BOOTS", "GOLDEN_CARROT", "GOLDEN_CHESTPLATE", "GOLDEN_HELMET", "GOLDEN_HOE", "GOLDEN_HORSE_ARMOR", "GOLDEN_LEGGINGS", "GOLDEN_PICKAXE", "GOLDEN_SHOVEL", "GOLDEN_SWORD", "GOLD_BLOCK", "GOLD_INGOT", "GOLD_NUGGET", "GOLD_ORE", "GRANITE", "GRANITE_SLAB", "GRANITE_STAIRS", "GRANITE_WALL", "GRASS", "GRASS_BLOCK", "GRASS_PATH", "GRAVEL", "GRAY_BANNER", "GRAY_BED", "GRAY_CARPET", "GRAY_CONCRETE", "GRAY_CONCRETE_POWDER", "GRAY_DYE", "GRAY_GLAZED_TERRACOTTA", "GRAY_SHULKER_BOX", "GRAY_STAINED_GLASS", "GRAY_STAINED_GLASS_PANE", "GRAY_TERRACOTTA", "GRAY_WOOL", "GREEN_BANNER", "GREEN_BED", "GREEN_CARPET", "GREEN_CONCRETE", "GREEN_CONCRETE_POWDER", "GREEN_DYE", "GREEN_GLAZED_TERRACOTTA", "GREEN_SHULKER_BOX", "GREEN_STAINED_GLASS", "GREEN_STAINED_GLASS_PANE", "GREEN_TERRACOTTA", "GREEN_WOOL", "GRINDSTONE", "GUARDIAN_SPAWN_EGG", "GUNPOWDER", "HAY_BLOCK", "HEART_OF_THE_SEA", "HEAVY_WEIGHTED_PRESSURE_PLATE", "HOPPER", "HOPPER_MINECART", "HORN_CORAL", "HORN_CORAL_BLOCK", "HORN_CORAL_FAN", "HORSE_SPAWN_EGG", "HUSK_SPAWN_EGG", "ICE", "INFESTED_CHISELED_STONE_BRICKS", "INFESTED_COBBLESTONE", "INFESTED_CRACKED_STONE_BRICKS", "INFESTED_MOSSY_STONE_BRICKS", "INFESTED_STONE", "INFESTED_STONE_BRICKS", "INK_SAC", "IRON_AXE", "IRON_BARS", "IRON_BLOCK", "IRON_BOOTS", "IRON_CHESTPLATE", "IRON_DOOR", "IRON_HELMET", "IRON_HOE", "IRON_HORSE_ARMOR", "IRON_INGOT", "IRON_LEGGINGS", "IRON_NUGGET", "IRON_ORE", "IRON_PICKAXE", "IRON_SHOVEL", "IRON_SWORD", "IRON_TRAPDOOR", "ITEM_FRAME", "JACK_O_LANTERN", "JIGSAW", "JUKEBOX", "JUNGLE_BOAT", "JUNGLE_BUTTON", "JUNGLE_DOOR", "JUNGLE_FENCE", "JUNGLE_FENCE_GATE", "JUNGLE_LEAVES", "JUNGLE_LOG", "JUNGLE_PLANKS", "JUNGLE_PRESSURE_PLATE", "JUNGLE_SAPLING", "JUNGLE_SIGN", "JUNGLE_SLAB", "JUNGLE_STAIRS", "JUNGLE_TRAPDOOR", "JUNGLE_WOOD", "KELP", "KELP_PLANT", "LADDER", "LANTERN", "LAPIS_BLOCK", "LAPIS_LAZULI", "LAPIS_ORE", "LARGE_FERN", "LAVA_BUCKET", "LEAD", "LEATHER", "LEATHER_BOOTS", "LEATHER_CHESTPLATE", "LEATHER_HELMET", "LEATHER_HORSE_ARMOR", "LEATHER_LEGGINGS", "LECTERN", "LEVER", "LIGHT_BLUE_BANNER", "LIGHT_BLUE_BED", "LIGHT_BLUE_CARPET", "LIGHT_BLUE_CONCRETE", "LIGHT_BLUE_CONCRETE_POWDER", "LIGHT_BLUE_DYE", "LIGHT_BLUE_GLAZED_TERRACOTTA", "LIGHT_BLUE_SHULKER_BOX", "LIGHT_BLUE_STAINED_GLASS", "LIGHT_BLUE_STAINED_GLASS_PANE", "LIGHT_BLUE_TERRACOTTA", "LIGHT_BLUE_WOOL", "LIGHT_GRAY_BANNER", "LIGHT_GRAY_BED", "LIGHT_GRAY_CARPET", "LIGHT_GRAY_CONCRETE", "LIGHT_GRAY_CONCRETE_POWDER", "LIGHT_GRAY_DYE", "LIGHT_GRAY_GLAZED_TERRACOTTA", "LIGHT_GRAY_SHULKER_BOX", "LIGHT_GRAY_STAINED_GLASS", "LIGHT_GRAY_STAINED_GLASS_PANE", "LIGHT_GRAY_TERRACOTTA", "LIGHT_GRAY_WOOL", "LIGHT_WEIGHTED_PRESSURE_PLATE", "LILAC", "LILY_OF_THE_VALLEY", "LILY_PAD", "LIME_BANNER", "LIME_BED", "LIME_CARPET", "LIME_CONCRETE", "LIME_CONCRETE_POWDER", "LIME_DYE", "LIME_GLAZED_TERRACOTTA", "LIME_SHULKER_BOX", "LIME_STAINED_GLASS", "LIME_STAINED_GLASS_PANE", "LIME_TERRACOTTA", "LIME_WOOL", "LINGERING_POTION", "LLAMA_SPAWN_EGG", "LOOM", "MAGENTA_BANNER", "MAGENTA_BED", "MAGENTA_CARPET", "MAGENTA_CONCRETE", "MAGENTA_CONCRETE_POWDER", "MAGENTA_DYE", "MAGENTA_GLAZED_TERRACOTTA", "MAGENTA_SHULKER_BOX", "MAGENTA_STAINED_GLASS", "MAGENTA_STAINED_GLASS_PANE", "MAGENTA_TERRACOTTA", "MAGENTA_WOOL", "MAGMA_BLOCK", "MAGMA_CREAM", "MAGMA_CUBE_SPAWN_EGG", "MAP", "MELON", "MELON_SEEDS", "MELON_SLICE", "MELON_STEM", "MILK_BUCKET", "MINECART", "MOJANG_BANNER_PATTERN", "MOOSHROOM_SPAWN_EGG", "MOSSY_COBBLESTONE", "MOSSY_COBBLESTONE_SLAB", "MOSSY_COBBLESTONE_STAIRS", "MOSSY_COBBLESTONE_WALL", "MOSSY_STONE_BRICKS", "MOSSY_STONE_BRICK_SLAB", "MOSSY_STONE_BRICK_STAIRS", "MOSSY_STONE_BRICK_WALL", "MULE_SPAWN_EGG", "MUSHROOM_STEM", "MUSHROOM_STEW", "MUSIC_DISC_11", "MUSIC_DISC_13", "MUSIC_DISC_BLOCKS", "MUSIC_DISC_CAT", "MUSIC_DISC_CHIRP", "MUSIC_DISC_FAR", "MUSIC_DISC_MALL", "MUSIC_DISC_MELLOHI", "MUSIC_DISC_STAL", "MUSIC_DISC_STRAD", "MUSIC_DISC_WAIT", "MUSIC_DISC_WARD", "MUTTON", "MYCELIUM", "NAME_TAG", "NAUTILUS_SHELL", "NETHERRACK", "NETHER_BRICK", "NETHER_BRICKS", "NETHER_BRICK_FENCE", "NETHER_BRICK_SLAB", "NETHER_BRICK_STAIRS", "NETHER_BRICK_WALL", "NETHER_QUARTZ_ORE", "NETHER_STAR", "NETHER_WART", "NETHER_WART_BLOCK", "NOTE_BLOCK", "OAK_BOAT", "OAK_BUTTON", "OAK_DOOR", "OAK_FENCE", "OAK_FENCE_GATE", "OAK_LEAVES", "OAK_LOG", "OAK_PLANKS", "OAK_PRESSURE_PLATE", "OAK_SAPLING", "OAK_SIGN", "OAK_SLAB", "OAK_STAIRS", "OAK_TRAPDOOR", "OAK_WOOD", "OBSERVER", "OBSIDIAN", "OCELOT_SPAWN_EGG", "ORANGE_BANNER", "ORANGE_BED", "ORANGE_CARPET", "ORANGE_CONCRETE", "ORANGE_CONCRETE_POWDER", "ORANGE_DYE", "ORANGE_GLAZED_TERRACOTTA", "ORANGE_SHULKER_BOX", "ORANGE_STAINED_GLASS", "ORANGE_STAINED_GLASS_PANE", "ORANGE_TERRACOTTA", "ORANGE_TULIP", "ORANGE_WOOL", "OXEYE_DAISY", "PACKED_ICE", "PAINTING", "PANDA_SPAWN_EGG", "PAPER", "PARROT_SPAWN_EGG", "PEONY", "PETRIFIED_OAK_SLAB", "PHANTOM_MEMBRANE", "PHANTOM_SPAWN_EGG", "PIG_SPAWN_EGG", "PILLAGER_SPAWN_EGG", "PINK_BANNER", "PINK_BED", "PINK_CARPET", "PINK_CONCRETE", "PINK_CONCRETE_POWDER", "PINK_DYE", "PINK_GLAZED_TERRACOTTA", "PINK_SHULKER_BOX", "PINK_STAINED_GLASS", "PINK_STAINED_GLASS_PANE", "PINK_TERRACOTTA", "PINK_TULIP", "PINK_WOOL", "PISTON", "PLAYER_HEAD", "PODZOL", "POISONOUS_POTATO", "POLAR_BEAR_SPAWN_EGG", "POLISHED_ANDESITE", "POLISHED_ANDESITE_SLAB", "POLISHED_ANDESITE_STAIRS", "POLISHED_DIORITE", "POLISHED_DIORITE_SLAB", "POLISHED_DIORITE_STAIRS", "POLISHED_GRANITE", "POLISHED_GRANITE_SLAB", "POLISHED_GRANITE_STAIRS", "POPPED_CHORUS_FRUIT", "POPPY", "PORKCHOP", "POTATO", "POTATOES", "POTION", "POWERED_RAIL", "PRISMARINE", "PRISMARINE_BRICKS", "PRISMARINE_BRICK_SLAB", "PRISMARINE_BRICK_STAIRS", "PRISMARINE_CRYSTALS", "PRISMARINE_SHARD", "PRISMARINE_SLAB", "PRISMARINE_STAIRS", "PRISMARINE_WALL", "PUFFERFISH", "PUFFERFISH_BUCKET", "PUFFERFISH_SPAWN_EGG", "PUMPKIN", "PUMPKIN_PIE", "PUMPKIN_SEEDS", "PUMPKIN_STEM", "PURPLE_BANNER", "PURPLE_BED", "PURPLE_CARPET", "PURPLE_CONCRETE", "PURPLE_CONCRETE_POWDER", "PURPLE_DYE", "PURPLE_GLAZED_TERRACOTTA", "PURPLE_SHULKER_BOX", "PURPLE_STAINED_GLASS", "PURPLE_STAINED_GLASS_PANE", "PURPLE_TERRACOTTA", "PURPLE_WOOL", "PURPUR_BLOCK", "PURPUR_PILLAR", "PURPUR_SLAB", "PURPUR_STAIRS", "QUARTZ", "QUARTZ_BLOCK", "QUARTZ_PILLAR", "QUARTZ_SLAB", "QUARTZ_STAIRS", "RABBIT", "RABBIT_FOOT", "RABBIT_HIDE", "RABBIT_SPAWN_EGG", "RABBIT_STEW", "RAIL", "RAVAGER_SPAWN_EGG", "REDSTONE", "REDSTONE_BLOCK", "REDSTONE_LAMP", "REDSTONE_ORE", "REDSTONE_TORCH", "RED_BANNER", "RED_BED", "RED_CARPET", "RED_CONCRETE", "RED_CONCRETE_POWDER", "RED_DYE", "RED_GLAZED_TERRACOTTA", "RED_MUSHROOM", "RED_MUSHROOM_BLOCK", "RED_NETHER_BRICKS", "RED_NETHER_BRICK_SLAB", "RED_NETHER_BRICK_STAIRS", "RED_NETHER_BRICK_WALL", "RED_SAND", "RED_SANDSTONE", "RED_SANDSTONE_SLAB", "RED_SANDSTONE_STAIRS", "RED_SANDSTONE_WALL", "RED_SHULKER_BOX", "RED_STAINED_GLASS", "RED_STAINED_GLASS_PANE", "RED_TERRACOTTA", "RED_TULIP", "RED_WOOL", "REPEATER", "ROSE_BUSH", "ROTTEN_FLESH", "SADDLE", "SALMON", "SALMON_BUCKET", "SALMON_SPAWN_EGG", "SAND", "SANDSTONE", "SANDSTONE_SLAB", "SANDSTONE_STAIRS", "SANDSTONE_WALL", "SCAFFOLDING", "SCUTE", "SEAGRASS", "SEA_LANTERN", "SEA_PICKLE", "SHEARS", "SHEEP_SPAWN_EGG", "SHIELD", "SHULKER_BOX", "SHULKER_SHELL", "SHULKER_SPAWN_EGG", "SILVERFISH_SPAWN_EGG", "SKELETON_HORSE_SPAWN_EGG", "SKELETON_SKULL", "SKELETON_SPAWN_EGG", "SKULL_BANNER_PATTERN", "SLIME_BALL", "SLIME_BLOCK", "SLIME_SPAWN_EGG", "SMITHING_TABLE", "SMOKER", "SMOOTH_QUARTZ", "SMOOTH_QUARTZ_SLAB", "SMOOTH_QUARTZ_STAIRS", "SMOOTH_RED_SANDSTONE", "SMOOTH_RED_SANDSTONE_SLAB", "SMOOTH_RED_SANDSTONE_STAIRS", "SMOOTH_SANDSTONE", "SMOOTH_SANDSTONE_SLAB", "SMOOTH_SANDSTONE_STAIRS", "SMOOTH_STONE", "SMOOTH_STONE_SLAB", "SNOW", "SNOWBALL", "SNOW_BLOCK", "SOUL_SAND", "SPAWNER", "SPECTRAL_ARROW", "SPIDER_EYE", "SPIDER_SPAWN_EGG", "SPLASH_POTION", "SPONGE", "SPRUCE_BOAT", "SPRUCE_BUTTON", "SPRUCE_DOOR", "SPRUCE_FENCE", "SPRUCE_FENCE_GATE", "SPRUCE_LEAVES", "SPRUCE_LOG", "SPRUCE_PLANKS", "SPRUCE_PRESSURE_PLATE", "SPRUCE_SAPLING", "SPRUCE_SIGN", "SPRUCE_SLAB", "SPRUCE_STAIRS", "SPRUCE_TRAPDOOR", "SPRUCE_WOOD", "SQUID_SPAWN_EGG", "STICK", "STICKY_PISTON", "STONE", "STONECUTTER", "STONE_AXE", "STONE_BRICKS", "STONE_BRICK_SLAB", "STONE_BRICK_STAIRS", "STONE_BRICK_WALL", "STONE_BUTTON", "STONE_HOE", "STONE_PICKAXE", "STONE_PRESSURE_PLATE", "STONE_SHOVEL", "STONE_SLAB", "STONE_STAIRS", "STONE_SWORD", "STRAY_SPAWN_EGG", "STRING", "STRIPPED_ACACIA_LOG", "STRIPPED_ACACIA_WOOD", "STRIPPED_BIRCH_LOG", "STRIPPED_BIRCH_WOOD", "STRIPPED_DARK_OAK_LOG", "STRIPPED_DARK_OAK_WOOD", "STRIPPED_JUNGLE_LOG", "STRIPPED_JUNGLE_WOOD", "STRIPPED_OAK_LOG", "STRIPPED_OAK_WOOD", "STRIPPED_SPRUCE_LOG", "STRIPPED_SPRUCE_WOOD", "STRUCTURE_BLOCK", "STRUCTURE_VOID", "SUGAR", "SUGAR_CANE", "SUNFLOWER", "SUSPICIOUS_STEW", "SWEET_BERRIES", "SWEET_BERRY_BUSH", "TALL_GRASS", "TALL_SEAGRASS", "TERRACOTTA", "TNT", "TNT_MINECART", "TORCH", "TOTEM_OF_UNDYING", "TRADER_LLAMA_SPAWN_EGG", "TRAPPED_CHEST", "TRIDENT", "TRIPWIRE", "TRIPWIRE_HOOK", "TROPICAL_FISH", "TROPICAL_FISH_BUCKET", "TROPICAL_FISH_SPAWN_EGG", "TUBE_CORAL", "TUBE_CORAL_BLOCK", "TUBE_CORAL_FAN", "TURTLE_EGG", "TURTLE_HELMET", "TURTLE_SPAWN_EGG", "VEX_SPAWN_EGG", "VILLAGER_SPAWN_EGG", "VINDICATOR_SPAWN_EGG", "VINE", "WANDERING_TRADER_SPAWN_EGG", "WATER_BUCKET", "WET_SPONGE", "WHEAT", "WHEAT_SEEDS", "WHITE_BANNER", "WHITE_BED", "WHITE_CARPET", "WHITE_CONCRETE", "WHITE_CONCRETE_POWDER", "WHITE_DYE", "WHITE_GLAZED_TERRACOTTA", "WHITE_SHULKER_BOX", "WHITE_STAINED_GLASS", "WHITE_STAINED_GLASS_PANE", "WHITE_TERRACOTTA", "WHITE_TULIP", "WHITE_WOOL", "WITCH_SPAWN_EGG", "WITHER_ROSE", "WITHER_SKELETON_SKULL", "WITHER_SKELETON_SPAWN_EGG", "WOLF_SPAWN_EGG", "WOODEN_AXE", "WOODEN_HOE", "WOODEN_PICKAXE", "WOODEN_SHOVEL", "WOODEN_SWORD", "YELLOW_BANNER", "YELLOW_BED", "YELLOW_CARPET", "YELLOW_CONCRETE", "YELLOW_CONCRETE_POWDER", "YELLOW_DYE", "YELLOW_GLAZED_TERRACOTTA", "YELLOW_SHULKER_BOX", "YELLOW_STAINED_GLASS", "YELLOW_STAINED_GLASS_PANE", "YELLOW_TERRACOTTA", "YELLOW_WOOL", "ZOMBIE_HEAD", "ZOMBIE_HORSE_SPAWN_EGG", "ZOMBIE_PIGMAN_SPAWN_EGG", "ZOMBIE_SPAWN_EGG", "ZOMBIE_VILLAGER_SPAWN_EGG"};
	
	private Random random = new Random();
	
	private PotionEffectType[] badEffects = {PotionEffectType.BLINDNESS, PotionEffectType.CONFUSION, PotionEffectType.HUNGER, PotionEffectType.LEVITATION, PotionEffectType.POISON, PotionEffectType.SLOW, PotionEffectType.SLOW_DIGGING, PotionEffectType.WEAKNESS, PotionEffectType.WITHER};
	
	public DITimer(int seconds, ArrayList<UUID> pList) {
		this.seconds = seconds;
		this.secondsLeft = seconds;
		for(UUID p: pList)
			players.add(p);
	}
	
	public boolean generatePunishment(UUID player) {
		//3 main types of punishments possible
		//1. Random bad effect
		//2. TP random direction 19 blocks (only up if nether/end)
		//3. Replace random item in inventory with another
		
		//Firstly, generate punishment type
		int type = random.nextInt(3);
		
		//random bad effect
		if(type == 0) {
			int duration = 10 + random.nextInt(10);
			PotionEffect effect = new PotionEffect(badEffects[random.nextInt(badEffects.length)], duration*20, 1);
			Bukkit.getPlayer(player).addPotionEffect(effect, true);
			Bukkit.getPlayer(player).sendMessage(ChatColor.RED+""+ChatColor.ITALIC+"You have been struck with the effect of "+effect.getType().getName().replace('_', ' ')+"!");
			return true;
		}
		
		//tp random direction
		if(type == 1) {
			double x, y, z;
			boolean xz = true, up = true, down = true;
			double x_tp = 0, y_tp = 0, z_tp = 0;
			x = Bukkit.getPlayer(player).getLocation().getX();
			y = Bukkit.getPlayer(player).getLocation().getY();
			z = Bukkit.getPlayer(player).getLocation().getZ();
			
			if(!(Bukkit.getPlayer(player).getWorld().getEnvironment() == World.Environment.NORMAL)) {
				xz = false;
				if(Bukkit.getPlayer(player).getWorld().getEnvironment() == World.Environment.NETHER && y>100) up = false;
				if(Bukkit.getPlayer(player).getWorld().getEnvironment() == World.Environment.NETHER && y<30) down = false;
				if(Bukkit.getPlayer(player).getWorld().getEnvironment() == World.Environment.THE_END) down = false;
			}
			
			if(Bukkit.getPlayer(player).getWorld().getEnvironment() == World.Environment.NORMAL) {
				if(y<30) down = false;
			}
			
			if(xz) {
				x_tp = random.nextInt(3)-1;
				z_tp = random.nextInt(3)-1;
			}
			
			if(up && down) {
				y_tp = random.nextInt(3)-1;
			}
			
			if(up && !down) {
				y_tp = 1;
			}
			
			if(!up && down) {
				y_tp = -1;
			}
			
			Bukkit.getPlayer(player).teleport(new Location(Bukkit.getPlayer(player).getWorld(), x+((17+random.nextInt(7))*x_tp), y+((17+random.nextInt(7))*y_tp), z+((17+random.nextInt(7))*z_tp)));
			Bukkit.getPlayer(player).sendMessage(ChatColor.RED+""+ChatColor.ITALIC+"You have been randomly warped by the will of the gods!");
			return true;
		}
		
		//replace random item in inven with another
		if(type == 2) {
			PlayerInventory inven = Bukkit.getPlayer(player).getInventory();
			Material randomMat = Material.getMaterial(itemList[random.nextInt(itemList.length)]);
			ArrayList<Integer> slots = new ArrayList<Integer>();
			int slotIter = 0;
			int stackNo = 1;
			Material replacedItem = Material.AIR;
			boolean isEmpty = true;
			
			for(ItemStack i: inven.getContents()) {
				if(i != null) {
					isEmpty = false;
					break;
				}
			}
			
			if(isEmpty) {
				Bukkit.getPlayer(player).sendMessage(ChatColor.RED+""+ChatColor.ITALIC+"The gods tried to replace an item in your inventory but you have nothing in your inventory!");
				return true;
			}
			
			for(ItemStack i: inven.getContents()) {
				if(i != null && slotIter < 36) {
					slots.add(slotIter);
				}
				slotIter++;
			}
			
			int randomSlot = slots.get(random.nextInt(slots.size()));
			stackNo = inven.getItem(randomSlot).getAmount();
			replacedItem = inven.getItem(randomSlot).getType();
			
			inven.setItem(randomSlot, new ItemStack(randomMat, stackNo));
			
			Bukkit.getPlayer(player).sendMessage(ChatColor.RED+""+ChatColor.ITALIC+"The gods have randomly replaced your "+replacedItem.name().replace('_', ' ')+" with "+randomMat.name().replace('_', ' ')+"!");
			return true;
		}
		
		return false;
	}
	
	@Override
	public void run() {
		if(secondsLeft < 1) {
			Bukkit.getServer().broadcastMessage(ChatColor.RED+""+ChatColor.BOLD+"The gods have interferred!");
			Bukkit.getScheduler().cancelTasks(DivineIntervention.getPlugin(DivineIntervention.class));
			for(UUID p: players) {
				generatePunishment(p);
				Bukkit.getPlayer(p).getWorld().strikeLightningEffect(Bukkit.getPlayer(p).getLocation());
			}
			secondsLeft = seconds;
			Bukkit.getScheduler().scheduleSyncRepeatingTask(DivineIntervention.getPlugin(DivineIntervention.class), this, 0L, 20L);
		}
		
		if(secondsLeft == 10) Bukkit.getServer().broadcastMessage(ChatColor.GRAY+""+ChatColor.ITALIC+"You have a bad feeling that something will happen soon...");
		
		secondsLeft--;
	}
	
	public void scheduleTimer() {
		Bukkit.getScheduler().scheduleSyncRepeatingTask(DivineIntervention.getPlugin(DivineIntervention.class), this, 0L, 20L);
	}
	
	public void stopTimer() {
		Bukkit.getScheduler().cancelTasks(DivineIntervention.getPlugin(DivineIntervention.class));
	}

}
